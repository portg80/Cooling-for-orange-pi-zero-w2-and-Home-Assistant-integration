# Охлаждение для orange pi zero w2 + Home Assistant интеграция

Это проект включает в себя инструкцию как самому сделать для orange pi zero w2 активное охлаждение кулером (вентилятором) с управлением скоростью вращения. 
Также через MQTT мы будем отображать показатели системы охлаждения в Home Assistant (далее иногда буду называть его "HA") и из него же сможем менять ее настройки.

Написано так чтобы даже новичок разобрался. Я буду иногда расшифровывать сокращения по типу "ШИМ" вот так в скобках: "ШИМ (PWM) («мощности»)" для большей ясности.

## Вот что мы получим в конце:
<img width="2560" height="1280" alt="image" src="https://github.com/user-attachments/assets/8251fcb3-5214-4ed4-8772-b2786988df85" />
Это сама панель управления внутри Home Assistant (HA). 

На графиках отображается:
- **Температура процессора** (CPU) (получаем через MQTT)
- **Частота ШИМ** (значение от 0 до 1024, чем больше - тем быстрее крутится вентилятор, другими словами "мощность") (получаем через MQTT)
- **Скорость вращения вентилятора** RPS (обороты кулера в секунду) (получаем через MQTT)
- **CPU использование**, нагрузка на процессор в процентах (стандартный датчик HA)

Слайдеры меняют настройки работы системы:
- **Пороги температур:** 

    **Первый слайдер «Temp для 100% вращения»** устанавливает значение температуры процессора, при котором PWM (ШИМ), то есть «мощность» вентилятора, будет максимальной.    
    **Второй слайдер "Temp для 0% вращения"** устанавливает ту температуру, при которой вентилятор будет работать на минимальной «мощности», а когда температура опустится ниже, то вовсе отключится

- **Пороги ШИМ** (PWM) («мощности») как раз таки устанавливают минимальный и максимальный порог мощности работы вентилятора. Почему минимальный у меня = 950 PWM? Подобрал это опытным путем, ибо при меньших значениях МОЙ вентилятор за 60р просто не может стартануть.

https://github.com/user-attachments/assets/947b8b01-0ef1-4230-bbaa-66d4df62416a

# Что купить?
1 шт. - [MF-25 (С2-23) 0.25Вт, 10 кОм, 1%, Резистор металлопленочный
](https://www.chipdip.ru/product/mf-25-s2-23-0.25vt-10-kom-1-rezistor-metalloplenochnyy-41486)

1 шт. - [CF-25 (С1-4) 0.25Вт, 1 кОм, 5%, Резистор углеродистый](https://www.chipdip.ru/product/cf-25-s1-4-0.25vt-1-kom-5-rezistor-uglerodistyy-44435)

1 шт. - [MO-50 (С2-23) 0.5Вт, 470 Ом, 5%, Резистор металлооксидный](https://www.chipdip.ru/product/mo-50-s2-23-0.5vt-470-om-5-rezistor-metallooksidnyy-9000040045)

1 шт. - [1N4001, Диод выпрямительный 1А 50В [DO-41 / DO-204AC.]](https://www.chipdip.ru/product/1n4001-diod-vypryamitelnyy-1a-50v-do-41-do-204ac-diotec-9000461658)

1 шт. - [IRLZ44NPBF, Транзистор, N-канал 55В 47А logic [TO-220AB]](https://www.chipdip.ru/product/irlz44npbf-tranzistor-n-kanal-55v-47a-logic-to-220ab-infineon-38440)

1 шт. - [Макетная плата 4х6 см](https://www.chipdip.ru/product/maketnaya-plata-4x6-sm-8044995884)

1 шт. - [Флюс для пайки, паста паяльная канифольно-вазелиновая, 20 г, банка, инд. упаковка, серия "Алмаз" TDM](https://www.chipdip.ru/product/sq1025-1511-flyus-dlya-payki-pasta-payalnaya-tdm-electric-8028919866)

1 шт. - [EX295193RUS, Вентилятор 5В DC ExeGate EX04010S3P-5 (40x40x10 мм, Sleeve bearing (подшипник скольжения), 3pin, 5000RPM, 24dBA)](https://www.chipdip.ru/product/ex295193rus-ventilyator-5v-dc-exegate-ex04010s3p-5-8038575118)

4 шт. используется в проекте, но брал набор из 40 - [Соединительные провода «папа-мама» (40 шт. / 20 см), Шлейф из 40 проводов для прототипирования электронных устройств
](https://www.chipdip.ru/product/soedinitelnye-provoda-papa-mama-40-sht-20-sm-shleyf-iz-9001322248)

2 шт. используется в проекте, но брал набор из 5 - [JST PH 2.0мм 4pin кабель с разъемом](https://www.ozon.ru/product/kabel-dlya-podklyucheniya-periferiynyh-ustroystv-0-15-m-krasnyy-chernyy-2368560758/?at=Brtz2BAv9IApANKMigDmRj6uvKN3zQF0JA1j2ur9noMW) (~150р)





